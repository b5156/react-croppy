!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("react")):"function"==typeof define&&define.amd?define(["react"],e):"object"==typeof exports?exports.ReactCroppy=e(require("react")):t.ReactCroppy=e(t.React)}(this,function(t){return function(t){function e(n){if(i[n])return i[n].exports;var o=i[n]={exports:{},id:n,loaded:!1};return t[n].call(o.exports,o,o.exports,e),o.loaded=!0,o.exports}var i={};return e.m=t,e.c=i,e.p="",e(0)}([function(t,e,i){t.exports=i(5)},function(e,i){e.exports=t},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var s=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t},a=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),u=i(1),p=n(u),c=i(3),l=n(c),h=i(6),f=function(t){function e(i){var n=this;o(this,e),t.call(this,i),this.getPosition=function(t){var e=t.pageX-n.offsetLeft,i=t.pageY-n.offsetTop;return{x:e,y:i}},this.posCollidesCrop=function(t){var e=t.x,i=t.y;return e>=n.state.x&&e<=n.state.x+n.state.width&&i>=n.state.y&&i<=n.state.y+n.state.height},this.posCollidesResizeHandler=function(t){var e=t.x,i=t.y,o=n.state.x+n.state.width-20,r=n.state.y+n.state.height-20;return e>=o&&o+20>=e&&i>=r&&r+20>=i},this.cropIsActive=function(){return n.state.width&&n.state.height},this.getDelta=function(t){return{x:t.x-n.state.x,y:t.y-n.state.y}},this.onMouseDown=function(t){t.preventDefault();var e=n.getPosition(t),i=n.cropIsActive(),o=n.posCollidesCrop(e);i&&o?n.posCollidesResizeHandler(e)?n.setState({resizing:!0}):n.setState({dragging:!0,delta:n.getDelta(e)}):n.setState(s({},e,{width:0,height:0,resizing:!0}))},this.onResize=function(t){var e=t.width,i=t.height,o=n.props,r=o.aspectRatio,s=o.minCropWidth,a=o.minCropHeight;return s&&(e=Math.max(s,n.getRatio()*e)),a&&(i=Math.max(a,n.getRatio()*i)),r&&(i=e/r),{width:e,height:i}},this.onMouseMove=function(t){if(n.state.dragging||n.state.resizing){t.preventDefault();var e=n.getPosition(t),i=e.x,o=e.y,r=n.state,s=r.width,a=r.height,u=r.containerWidth,p=r.containerHeight,c=r.delta,l={};if(n.state.dragging)l={x:h.clip(i-c.x,0,u-s),y:h.clip(o-c.y,0,p-a)};else if(n.state.resizing){if(s=i-n.state.x,a=o-n.state.y,0>=s||0>=a)return;l=n.onResize({width:h.clip(s,0,u-n.state.x),height:h.clip(a,0,u-n.state.y)})}n.setState(l)}},this.isInBounds=function(t){var e=t.x,i=t.y,o=t.width,r=t.height;return e+o<=n.state.containerWidth&&i+r<=n.state.containerHeight},this.onMouseUp=function(){if(n.state.dragging||n.state.resizing){var t=n.getRatio(),e=n.state,i=e.x,o=e.y,r=e.width,s=e.height,a={nativeSize:n.image.nativeSize,x:t*i,y:t*o,width:t*r,height:t*s};n.setState({resizing:!1,dragging:!1}),n.props.onCrop&&n.props.onCrop(a)}},this.computeSize=function(){var t=p["default"].findDOMNode(n.refs.image),e=window.getComputedStyle(t),i=parseInt(e.getPropertyValue("width").slice(0,-2),10),o=parseInt(e.getPropertyValue("height").slice(0,-2),10),r=n.state.isRetina;n.image=n.image||{},n.image.nativeSize={width:t.naturalWidth,height:t.naturalHeight},n.setState({containerWidth:r?i:i,containerHeight:r?o:o,canvasWidth:i,canvasHeight:o})},this.state={canvasWidth:0,canvasHeight:0,x:null,y:null,width:0,height:0,resizing:!1,dragging:!1,isRetina:h.isRetina()}}return r(e,t),a(e,null,[{key:"propTypes",value:{src:u.PropTypes.string.isRequired,minCropWidth:u.PropTypes.number,maxCropWidth:u.PropTypes.number,borderColor:u.PropTypes.string,style:u.PropTypes.object},enumerable:!0},{key:"defaultProps",value:{minCropWidth:0,minCropHeight:0,borderColor:"#FF4136",style:{}},enumerable:!0}]),e.prototype.componentDidMount=function(){this.setupListeners();var t=p["default"].findDOMNode(this);this.offsetLeft=t.offsetLeft,this.offsetTop=t.offsetTop},e.prototype.componentWillUnmount=function(){this.teardownListeners()},e.prototype.setupListeners=function(){window.addEventListener("mousemove",this.onMouseMove),window.addEventListener("mouseup",this.onMouseUp)},e.prototype.teardownListeners=function(){window.removeEventListener("mousemove",this.onMouseMove),window.removeEventListener("mouseup",this.onMouseUp)},e.prototype.getRatio=function(){return this.state.containerWidth/this.image.nativeSize.width},e.prototype.render=function(){return p["default"].createElement("div",{onDrag:this.onDrag,onMouseDown:this.onMouseDown,style:s({position:"relative"},this.props.style)},p["default"].createElement("div",{style:{position:"absolute",top:0,left:0,zIndex:1}},p["default"].createElement(l["default"],{canvasWidth:this.state.canvasWidth,canvasHeight:this.state.canvasHeight,width:this.state.width,height:this.state.height,x:this.state.x,y:this.state.y,borderColor:this.props.borderColor,isRetina:this.state.isRetina})),p["default"].createElement("img",{ref:"image",onLoad:this.computeSize,style:{position:"absolute",top:0,left:0,zIndex:0},src:this.props.src}))},e}(u.Component);e["default"]=f,t.exports=e["default"]},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var s=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t},a=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),u=i(1),p=n(u),c=function(t){function e(i){var n=this;o(this,e),t.call(this,i),this.paint=function(t){var e=t.x,i=t.y,o=t.width,r=t.height,s=20;n.props.isRetina&&(e=2*e,i=2*i,o=2*o,r=2*r,s=2*s);var a=n.props,u=(a.canvasWidth,a.canvasHeight,p["default"].findDOMNode(n)),c=u.getContext("2d");c.clearRect(0,0,u.width,u.height),o&&r&&(c.strokeStyle=n.props.borderColor,c.fillStyle="rgba(0, 0, 0, 0.3)",c.beginPath(),c.rect(e,i,o,r),c.stroke(),c.rect(u.width,0,-u.width,u.height),c.fill("evenodd"),c.fillStyle=n.props.borderColor,c.fillRect(e+o-s,i+r-s,s,s))}}return r(e,t),a(e,null,[{key:"propTypes",value:{canvasWidth:u.PropTypes.number.isRequired,canvasHeight:u.PropTypes.number.isRequired,borderColor:u.PropTypes.string.isRequired,isRetina:u.PropTypes.bool.isRequired},enumerable:!0}]),e.prototype.componentDidUpdate=function(){var t=this.props,e=t.x,i=t.y,n=t.height,o=t.width;null!==e&&null!==i&&this.paint({x:e,y:i,width:o,height:n})},e.prototype.render=function(){var t=this.props,e=t.canvasWidth,i=t.canvasHeight,n=t.isRetina,o={};return n&&(o.style={width:e,height:i}),p["default"].createElement("canvas",s({},o,{width:n?2*e:e,height:n?2*i:i}))},e}(u.Component);e["default"]=c,t.exports=e["default"]},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}e.__esModule=!0;var o=i(2),r=n(o);e.Cropper=r["default"]},function(t,e,i){"use strict";function n(t,e){var i=e({},t);return delete i["default"],i}function o(t,e){for(var i=Object.getOwnPropertyNames(e),n=0;n<i.length;n++){var o=i[n],r=Object.getOwnPropertyDescriptor(e,o);r&&r.configurable&&void 0===t[o]&&Object.defineProperty(t,o,r)}return t}e.__esModule=!0;var r=i(4);o(e,n(r,o))},function(t,e){(function(t){"use strict";function i(t,e,i){return Math.min(Math.max(t,e),i)}function n(){return t.matchMedia("(-webkit-device-pixel-ratio: 2)").matches}e.__esModule=!0,e.clip=i,e.isRetina=n}).call(e,function(){return this}())}])});